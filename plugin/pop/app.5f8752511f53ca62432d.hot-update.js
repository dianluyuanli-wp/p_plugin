webpackHotUpdate("app",{

/***/ "./project/entry/page/walletManage/index.tsx":
/*!***************************************************!*\
  !*** ./project/entry/page/walletManage/index.tsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.css */ \"./project/entry/page/walletManage/index.css\");\n/* harmony import */ var _widgets_headBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @widgets/headBar */ \"./project/entry/widgets/headBar/index.tsx\");\n/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-i18next */ \"./node_modules/react-i18next/dist/es/index.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/dist/mobx.esm.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _constants_app__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @constants/app */ \"./project/constants/app.tsx\");\n/* harmony import */ var _utils_tools__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @utils/tools */ \"./project/utils/tools.tsx\");\n/* harmony import */ var _utils_chrome__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @utils/chrome */ \"./project/utils/chrome.tsx\");\n/* harmony import */ var _utils_useStore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @utils/useStore */ \"./project/utils/useStore.tsx\");\n/* harmony import */ var _constants_chrome__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @constants/chrome */ \"./project/constants/chrome.tsx\");\n/*\r\n * @Author: guanlanluditie\r\n * @Date: 2021-02-15 22:25:13\r\n * @Last Modified by: guanlanluditie\r\n * @Last Modified time: 2021-02-16 18:04:07\r\n */\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst WalletManage = function () {\r\n    let { t } = Object(react_i18next__WEBPACK_IMPORTED_MODULE_3__[\"useTranslation\"])();\r\n    const globalStore = Object(_utils_useStore__WEBPACK_IMPORTED_MODULE_11__[\"useStores\"])('GlobalStore');\r\n    const { currentAccount, favoriteAccount } = globalStore;\r\n    const history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_4__[\"useHistory\"])();\r\n    Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\r\n        console.log(globalStore.accountObj);\r\n    }, []);\r\n    function jump(path) {\r\n        history.push(path);\r\n    }\r\n    function changeFavorite(address) {\r\n        Object(mobx__WEBPACK_IMPORTED_MODULE_5__[\"runInAction\"])(() => {\r\n            globalStore.favoriteAccount = address;\r\n        });\r\n        //  设置chrome存储\r\n        Object(_utils_chrome__WEBPACK_IMPORTED_MODULE_10__[\"setStorage\"])({\r\n            [_constants_chrome__WEBPACK_IMPORTED_MODULE_12__[\"FAVORITE_ACCOUNT\"]]: address\r\n        });\r\n    }\r\n    function deleteAccount(e, add) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //  避免冒泡\r\n            e.stopPropagation();\r\n            let ans = yield Object(_utils_chrome__WEBPACK_IMPORTED_MODULE_10__[\"getStorage\"])({ [_constants_chrome__WEBPACK_IMPORTED_MODULE_12__[\"ADDRESS_ARRAY\"]]: [] });\r\n            let addArr = ans[_constants_chrome__WEBPACK_IMPORTED_MODULE_12__[\"ADDRESS_ARRAY\"]];\r\n            console.log(ans, addArr);\r\n            const targetIndex = addArr.indexOf(add);\r\n            addArr.splice(targetIndex, 1);\r\n            Object(_utils_chrome__WEBPACK_IMPORTED_MODULE_10__[\"setStorage\"])({\r\n                [_constants_chrome__WEBPACK_IMPORTED_MODULE_12__[\"ADDRESS_ARRAY\"]]: addArr\r\n            });\r\n            if (add === favoriteAccount) {\r\n                Object(mobx__WEBPACK_IMPORTED_MODULE_5__[\"runInAction\"])(() => {\r\n                    globalStore.favoriteAccount = addArr[0];\r\n                });\r\n            }\r\n            //  同步自己store的内容\r\n            Object(mobx__WEBPACK_IMPORTED_MODULE_5__[\"runInAction\"])(() => {\r\n                globalStore.addressArr = addArr;\r\n                delete globalStore.accountObj[add];\r\n            });\r\n            Object(_utils_chrome__WEBPACK_IMPORTED_MODULE_10__[\"removeStorage\"])(add);\r\n        });\r\n    }\r\n    function renderAccount() {\r\n        const target = globalStore.accountObj;\r\n        return Object.keys(target).map((item, index) => {\r\n            const { address, meta } = target[item];\r\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { key: index, className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].accountWrap, onClick: () => changeFavorite(address) },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].firRow },\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ffRow },\r\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(_index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].point, address === globalStore.favoriteAccount ? _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].activePoint : '') }),\r\n                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].aName }, meta.name)),\r\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tail, onClick: (e) => deleteAccount(e, address) }, \"\\u00B7\\u00B7\\u00B7\")),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].secAdd }, Object(_utils_tools__WEBPACK_IMPORTED_MODULE_9__[\"addressFormat\"])(address)));\r\n        });\r\n    }\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].wrap },\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_widgets_headBar__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { word: '钱包管理' }),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].leftBar },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tab },\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].blueBlock }),\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].polkadotIcon }))),\r\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rigthContent },\r\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].title },\r\n                \"Polkadot \",\r\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: _index_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addIcon, onClick: () => jump(_constants_app__WEBPACK_IMPORTED_MODULE_8__[\"PAGE_NAME\"].RETRIEVE_WALLET) })),\r\n            renderAccount())));\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(mobx_react__WEBPACK_IMPORTED_MODULE_6__[\"observer\"])(WalletManage));\r\n\n\n//# sourceURL=webpack:///./project/entry/page/walletManage/index.tsx?");

/***/ })

})